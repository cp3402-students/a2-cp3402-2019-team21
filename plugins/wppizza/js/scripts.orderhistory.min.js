jQuery(document).ready(function(p){var o=p(".wppizza-admin-orders"),n=p(".wppizza-admin-orders-attributes"),t=0<o.length,s=1e3*wppizza.aopt;if(t){var d=function(){var t=o.attr("id").split("-").pop(-1),r=n.val(),e=JSON.parse(r);if(void 0!==e.audio_notify)var i=new Audio(e.audio_notify);o.prepend('<div class="wppizza-loading"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"admin-order-history",post_id:t,atts:r}},function(t){console.log("orders polling"),void 0!==t.notify&&i.play(),o.html(t.html)},"json").error(function(t,r,e){alert("error[print] : "+e)})},u=setInterval(d,s);p(document).on("change",".wppizza-admin_orderhistory-order-status",function(t){clearInterval(u);var r=p(this),e=r.attr("id").split("-").pop(-1),o=r.val(),n=!1,a=e.split("_");jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"admin-change-status",uoKey:e,status:o}},function(t){if(void 0!==t.update_prohibited)return alert(t.update_prohibited),void(n=!0);d(),void 0!==t.orderstatus_change_alert&&""!=t.orderstatus_change_alert&&alert(t.orderstatus_change_alert)},"json").error(function(t,r,e){alert("error[status] : "+e)}).done(function(){n||function(t,r,e,o,n){if(0<t.length)for(i=0;i<t.length;i++)new Function("self, blog_id, order_id, status","return "+t[i]+"(self, blog_id, order_id, status);")(r,e,o,n)}(wppizza.fnOrderStatusChange,r,a[0],a[1],o),u=setInterval(d,s)})}),p(document).on("click",".wppizza-order-print, .wppizza-order-view",function(t){var r=p(this),e=r.attr("id").split("-").pop(-1),i=!!r.hasClass("wppizza-order-print");jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"admin-view-order",uoKey:e}},function(t){var r=window.open("","WppizzaOrder","width="+t["window-width"]+",height="+t["window-height"]);if(null!=r&&void 0!==r){if(r.document.open("text/html","replace"),"text/plain"==t["content-type"]){var e=t.markup.plaintext;r.document.write("<pre>"+e+"</pre>")}else{e=t.markup.html;r.document.write(e)}r.focus(),i&&r.print()}else alert("You must turn off your pop-up blocker to enable printing.\n\nPlease consult your device manufacturer about how to turn off pop-up blocking for this site.\n\n")},"json").error(function(t,r,e){alert("error[view/print] : "+e)})})}});